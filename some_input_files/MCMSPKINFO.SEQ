;******************************************************************************
;*									      *
;*									      *
;*	PROGRAM NAME:	D3APP:[PCM7.SABL]MCMSPKINFO.SEQ	   	              *
;*									      *
;*									      *
;*									      *
;*	PROJECT NAME:	MCMS                                                  *
;*	PROJECT NUM :						              * 
;*	PCM NUMBER  :	PCM7						      *
;*	WRITTEN BY  :	John Herrmann				              *
;*									      *
;*	DATE	    :	08/31/2018   					      *
;*									      *
;*									      *
;*									      *
;*	MODIFICATION LOG						      *
;*									      *
;*									      *
;	NO.	DATE		INITIALS	DESCRIPTION
;	--	--------	--------	-----------
;	1	08/31/18        joh001		Started programming.
;	2	09/04/18	joh002		Need to update last 
;	3	09/05/18	joh003		Clear brand when no tank pulling
;	4	09/05/18	egs004		Clear the brand when water out
;	5	09/05/18	egs005		Filler clear brand logic looking at the wrong pointer
;	6	09/06/18	joh006		I was wrong, the brand should be cleared out with spaces
;	7	09/07/18	joh007		UPdate NonDraft RelID for CFT's & PFT's
;	8	09/12/18	joh008		Fix the brand for b09 to look at FPST, not BBT's
;******************************************************************************
;
;
;
;	PROGRAM FUNCTION:
;	----------------
;
;	The purporse of this program is to recreate the BAS Release ID logic.
;	This is closly tied to the BASPKGINFO sequence that runs on OLBARP.
;	This program is left as a separate program from BASPKGINFO due to program
;	size constraints.
;	
;
;*******************************************************************************
;
;
;	DEFINE UNITS
;	------------
;
	UNIT ALLOF7
	COMMON ALLOF6,ALLOF5,OLBARP
	RUNIT ALLOF7

;*******************************************************************************
;
;
;	EQUATES

	; olbarp

	PRT_1G1_REL_ID_FL  		==      ZFL001 ;40700 L plc register offset
	PRT_1G1_LAB_STAT_SG		==      ZSG100
	PRT_1G1_BRAND_SG   		==      ZSG101

	PRT_1G2_REL_ID_FL  		==      ZFL002
	PRT_1G2_LAB_STAT_SG		==      ZSG102
	PRT_1G2_BRAND_SG   		==      ZSG103

	PRT_1G3_REL_ID_FL  		==      ZFL003
	PRT_1G3_LAB_STAT_SG		==      ZSG104
	PRT_1G3_BRAND_SG   		==      ZSG105

	PRT_1G4_REL_ID_FL  		==      ZFL004
	PRT_1G4_LAB_STAT_SG		==      ZSG106
	PRT_1G4_BRAND_SG   		==      ZSG107

	PRT_1G5_REL_ID_FL  		==      ZFL005
	PRT_1G5_LAB_STAT_SG		==      ZSG108
	PRT_1G5_BRAND_SG   		==      ZSG109

	PRT_1G6_REL_ID_FL  		==      ZFL006
	PRT_1G6_LAB_STAT_SG		==      ZSG110
	PRT_1G6_BRAND_SG   		==      ZSG111

	PRT_1G7_REL_ID_FL  		==      ZFL007
	PRT_1G7_LAB_STAT_SG		==      ZSG112
	PRT_1G7_BRAND_SG   		==      ZSG113

	PRT_1G8_REL_ID_FL  		==      ZFL008
	PRT_1G8_LAB_STAT_SG		==      ZSG114
	PRT_1G8_BRAND_SG   		==      ZSG120

	PRT_1G9_REL_ID_FL  		==      ZFL009
	PRT_1G9_LAB_STAT_SG		==      ZSG121
	PRT_1G9_BRAND_SG   		==      ZSG122

	PRT_1G10_REL_ID_FL 		==      ZFL010
	PRT_1G10_LAB_STAT_SG		==      ZSG123
	PRT_1G10_BRAND_SG  		==      ZSG124

	PRT_2G1_REL_ID_FL  		==      ZFL011
	PRT_2G1_LAB_STAT_SG		==      ZSG125
	PRT_2G1_BRAND_SG   		==      ZSG126

	PRT_2G2_REL_ID_FL  		==      ZFL012
	PRT_2G2_LAB_STAT_SG		==      ZSG127
	PRT_2G2_BRAND_SG   		==      ZSG128

	PRT_2G3_REL_ID_FL  		==      ZFL013
	PRT_2G3_LAB_STAT_SG		==      ZSG129
	PRT_2G3_BRAND_SG   		==      ZSG130

	PRT_2G4_REL_ID_FL  		==      ZFL014
	PRT_2G4_LAB_STAT_SG		==      ZSG131
	PRT_2G4_BRAND_SG   		==      ZSG132

	PRT_2G5_REL_ID_FL  		==      ZFL015
	PRT_2G5_LAB_STAT_SG		==      ZSG133
	PRT_2G5_BRAND_SG   		==      ZSG134

	PRT_2G6_REL_ID_FL  		==      ZFL016
	PRT_2G6_LAB_STAT_SG		==      ZSG140
	PRT_2G6_BRAND_SG   		==      ZSG141

	PRT_2G7_REL_ID_FL  		==      ZFL017
	PRT_2G7_LAB_STAT_SG		==      ZSG142
	PRT_2G7_BRAND_SG   		==      ZSG143

	PRT_2G8_REL_ID_FL  		==      ZFL018
	PRT_2G8_LAB_STAT_SG		==      ZSG144
	PRT_2G8_BRAND_SG   		==      ZSG145

	PRT_2G9_REL_ID_FL  		==      ZFL019
	PRT_2G9_LAB_STAT_SG		==      ZSG146
	PRT_2G9_BRAND_SG   		==      ZSG147

	PRT_2G10_REL_ID_FL 		==      ZFL020
	PRT_2G10_LAB_STAT_SG		==      ZSG148
	PRT_2G10_BRAND_SG  		==      ZSG149

	PRT_3G1_REL_ID_FL  		==      ZFL021
	PRT_3G1_LAB_STAT_SG		==      ZSG150
	PRT_3G1_BRAND_SG   		==      ZSG151

	PRT_3G2_REL_ID_FL  		==      ZFL022
	PRT_3G2_LAB_STAT_SG		==      ZSG152
	PRT_3G2_BRAND_SG   		==      ZSG153

	PRT_3G3_REL_ID_FL  		==      ZFL023
	PRT_3G3_LAB_STAT_SG		==      ZSG154
	PRT_3G3_BRAND_SG   		==      ZSG160

	PRT_3G4_REL_ID_FL  		==      ZFL024
	PRT_3G4_LAB_STAT_SG		==      ZSG161
	PRT_3G4_BRAND_SG   		==      ZSG162

	PRT_3G5_REL_ID_FL  		==      ZFL030
	PRT_3G5_LAB_STAT_SG		==      ZSG163
	PRT_3G5_BRAND_SG   		==      ZSG164

	PRT_3G6_REL_ID_FL  		==      ZFL031
	PRT_3G6_LAB_STAT_SG		==      ZSG165
	PRT_3G6_BRAND_SG   		==      ZSG166

	PRT_3G7_REL_ID_FL  		==      ZFL032
	PRT_3G7_LAB_STAT_SG		==      ZSG167
	PRT_3G7_BRAND_SG   		==      ZSG168

	PRT_3G8_REL_ID_FL  		==      ZFL033
	PRT_3G8_LAB_STAT_SG		==      ZSG169
	PRT_3G8_BRAND_SG   		==      ZSG170

	PRT_3G9_REL_ID_FL  		==      ZFL034
	PRT_3G9_LAB_STAT_SG		==      ZSG171
	PRT_3G9_BRAND_SG   		==      ZSG172

	PRT_3G10_REL_ID_FL 		==      ZFL035
	PRT_3G10_LAB_STAT_SG		==      ZSG173
	PRT_3G10_BRAND_SG  		==      ZSG174

	CFT1_REL_ID_FL 			==      ZFL036
	CFT1_BRAND_SG  			==      ZSG180

	CFT2_REL_ID_FL 			==      ZFL037
	CFT2_BRAND_SG  			==      ZSG181

	CFT3_REL_ID_FL 			==      ZFL038
	CFT3_BRAND_SG  			==      ZSG182

	CFT4_REL_ID_FL 			==      ZFL039
	CFT4_BRAND_SG  			==      ZSG183

	PFT1_REL_ID_FL 			==      ZFL074
	PFT1_BRAND_SG  			==      ZSG226

	FPST_REL_ID_FL 			==      ZFL040
	FPST_BRAND_SG  			==      ZSG184

	FPST2_REL_ID_FL			==      ZFL041
	FPST2_BRAND_SG 			==      ZSG185

	DYN_5F3_REL_ID_FL  		==      ZFL042
	DYN_5F3_LAB_STAT_SG		==      ZSG186
	DYN_5F3_BRAND_SG   		==      ZSG187

	DYN_5F4_REL_ID_FL  		==      ZFL043
	DYN_5F4_LAB_STAT_SG		==      ZSG188
	DYN_5F4_BRAND_SG   		==      ZSG189

	PALL1_BRAND_SG 			==			ZSG330  ;VCM023
        PALL2_BRAND_SG 			==			ZSG332  ;VCM023

	AUXTOP_REL_ID_FL		==      ZFL044
	AUXTOP_BRAND_SG			==      ZSG190

	AUXBOT_REL_ID_FL		==      ZFL045
	AUXBOT_BRAND_SG			==      ZSG191

	TOP_REL_ID_FL  			==      ZFL046
	TOP_BRAND_SG   			==      ZSG192

	MIDDLE_REL_ID_FL		==      ZFL047
	MIDDLE_BRAND_SG			==      ZSG193

	BOTTOM_REL_ID_FL		==      ZFL048
	BOTTOM_BRAND_SG			==      ZSG194

	C01_REL_ID_FL  			==      ZFL105
	C01_BRAND_SG   			==      ZSG224

	C01DR_REL_ID_FL			==      ZFL106
	C01DR_BRAND_SG 			==      ZSG225

	C02_REL_ID_FL  			==      ZFL049
	C02_BRAND_SG   			==      ZSG200

	C02DR_REL_ID_FL			==      ZFL050
	C02DR_BRAND_SG 			==      ZSG201

	C03_REL_ID_FL  			==      ZFL051
	C03_BRAND_SG   			==      ZSG202

	C03DR_REL_ID_FL			==      ZFL052
	C03DR_BRAND_SG 			==      ZSG203

	B04_REL_ID_FL  			==      ZFL053
	B04_BRAND_SG   			==      ZSG204

	B04DR_REL_ID_FL			==      ZFL054
	B04DR_BRAND_SG 			==      ZSG205

	B05_REL_ID_FL  			==      ZFL060
	B05_BRAND_SG   			==      ZSG206

	B05DR_REL_ID_FL			==      ZFL061
	B05DR_BRAND_SG 			==      ZSG207

	C06_REL_ID_FL  			==      ZFL062
	C06_BRAND_SG   			==      ZSG208

	C06DR_REL_ID_FL			==      ZFL063
	C06DR_BRAND_SG 			==      ZSG209

	C07_REL_ID_FL  			==      ZFL064
	C07_BRAND_SG   			==      ZSG210

	C07DR_REL_ID_FL			==      ZFL065
	C07DR_BRAND_SG 			==      ZSG211

	B08_REL_ID_FL  			==      ZFL066
	B08_BRAND_SG   			==      ZSG212

	B08DR_REL_ID_FL			==      ZFL067
	B08DR_BRAND_SG 			==      ZSG213

	B09_REL_ID_FL  			==      ZFL068
	B09_BRAND_SG   			==      ZSG214

	B09DR_REL_ID_FL			==      ZFL069
	B09DR_BRAND_SG 			==      ZSG220

	R02_REL_ID_FL  			==      ZFL070
	R02_BRAND_SG   			==      ZSG221

	R02DR_REL_ID_FL			==      ZFL071
	R02DR_BRAND_SG 			==      ZSG222

	UPPER_REL_ID_FL			==      ZFL072
	UPPER_BRAND_SG 			==      ZSG223

#include <allof5_upf.h>
#include <allof5_epn.h>

#include <allof7_epn.h>
#include <allof7_upf.h>

	;	
	EX1_FG				== MCMSPKINFO_EX1_FG_ALLOF7
	EX2_FG				== MCMSPKINFO_EX2_FG_ALLOF7
	PILK_SKID_PB_FG			== MCMSPKINFO_PILK_SKID_PB_FG_ALLOF7
	PILK_ERR_FG			== MCMSPKINFO_PILK_ERR_FG_ALLOF7
	LOG_ADI				== MCMSPKINFO_LOG_ADI_ALLOF7
	REL_LOOP_INT 			== MCMSPKINFO_REL_LOOP_INT_ALLOF7
	NEXT_REL_ID	 		== MCMSPKINFO_NEXT_REL_ID_ALLOF7
	FILLER_INUSE_INT		== MCMSPKINFO_FILLER_INUSE_INT_ALLOF7
	TANK_NUM			== MCMSPKINFO_TANK_NUM_ALLOF7
	DRAFT_ADD_INT			== MCMSPKINFO_DRAFT_ADD_INT_ALLOF7
	PILK_ERR_INT			== MCMSPKINFO_PILK_ERR_INT_ALLOF7
	FILLER_DRAFT_USE		== MCMSPKINFO_FILLER_DRAFT_USE_ALLOF7
	USE_COUNT			== MCMSPKINFO_USE_COUNT_ALLOF7
	LAST_FILLER_DRAFT_USE_PTR	== MCMSPKINFO_LAST_FILLER_DRAFT_USE_PTR_ALLOF7
	LAST_LINEUSE_PTR1_PTR		== MCMSPKINFO_LAST_FILLER_INUSE_PTR_ALLOF7
	FILLER_BRAND_PTR		== MCMSPKINFO_FILLER_BRAND_PTR_ALLOF7
	FILLER_REL_ID_PTR		== MCMSPKINFO_FILLER_REL_ID_PTR_ALLOF7
	TANK_BRAND_SG_PTR		== MCMSPKINFO_TANK_BRAND_SG_PTR_ALLOF7
	TANK_REL_ID_PTR			== MCMSPKINFO_TANK_REL_ID_PTR_ALLOF7
	FILLER_FG_PTR			== MCMSPKINFO_FILLER_FG_PTR_ALLOF7
	DRAFT_REL_ID_PTR 		== MCMSPKINFO_DRAFT_REL_ID_PTR_ALLOF7
	NONDRAFT_REL_ID_PTR		== MCMSPKINFO_NONDRAFT_REL_ID_PTR_ALLOF7


	PILK_MESSAGE			== MCMSPKINFO_PILK_MESSAGE_ALLOF7

	TMP_SG				== MCMSPKINFO_TMP_SG_ALLOF7
	BRAND_SG			== MCMSPKINFO_BRAND_SG_ALLOF7
	FILLER_SG			== MCMSPKINFO_FILLER_SG_ALLOF7
	TANK_NAME			== MCMSPKINFO_TANK_NAME_ALLOF7
	PILK_ERR_CLEAR_TMR		== MCMSPKINFO_PILK_ERR_CLEAR_TMR_ALLOF7
	DMMY_REL_ID			== MCMSPKINFO_DMMY_REL_ID_ALLOF7        
	PILK_ERROR_LIN			== MCMSPKINFO_PILK_ERROR_LIN_ALLOF7     
	PILK_ERROR_NUM			== MCMSPKINFO_PILK_ERROR_NUM_ALLOF7     
	PILK_LAMP_ADI			== MCMSPKINFO_PILK_LAMP_ADI_ALLOF7      
	PILK_LOG_ADI			== MCMSPKINFO_PILK_LOG_ADI_ALLOF7       
	PILK_ERR_CLEAR_TIME		== MCMSPKINFO_PILK_ERR_CLEAR_TIME_ALLOF7
	DRAFT_USE_DIFF			== MCMSPKINFO_DRAFT_USE_DIFF_ALLOF7     
	DRAFT_REM_INT			== MCMSPKINFO_DRAFT_REM_INT_ALLOF7      
	TMP_INT				== MCMSPKINFO_TMP_INT_ALLOF7
	FILLER_CNT			== MCMSPKINFO_FILLER_CNT_ALLOF7 
  
	TMP_PTR				== MCMSPKINFO_MCMSPKINFO_TMP_PTR_ALLOF7

	DMMY_TANK_BRAND			== MCMSPKINFO_DMMY_TANK_BRAND_ALLOF7
	PILK_ERR_SG			== MCMSPKINFO_PILK_ERR_SG_ALLOF7   

#include <constants.h>
	PILK_LAMP_NUMBER	== 0

	PRM_1G1_TANK_NUM	== 1			; joh017
	PRM_1G2_TANK_NUM	== 2			; joh017
	PRM_1G3_TANK_NUM	== 3			; joh017
	PRM_1G4_TANK_NUM	== 4			; joh017
	PRM_1G5_TANK_NUM	== 5			; joh017
	PRM_1G6_TANK_NUM	== 6			; joh017
	PRM_1G7_TANK_NUM	== 7			; joh017
	PRM_1G8_TANK_NUM	== 8			; joh017
	PRM_1G9_TANK_NUM	== 9			; joh017
	PRM_1G10_TANK_NUM	== 10			; joh017
	PRM_2G1_TANK_NUM	== 11			; joh017
	PRM_2G2_TANK_NUM	== 12			; joh017
	PRM_2G3_TANK_NUM	== 13			; joh017
	PRM_2G4_TANK_NUM	== 14			; joh017
	PRM_2G5_TANK_NUM	== 15			; joh017
	PRM_2G6_TANK_NUM	== 16			; joh017
	PRM_2G7_TANK_NUM	== 17			; joh017
	PRM_2G8_TANK_NUM	== 18			; joh017
	PRM_2G9_TANK_NUM	== 19			; joh017
	PRM_2G10_TANK_NUM	== 20			; joh017
	PRM_3G1_TANK_NUM	== 21			; joh017
	PRM_3G2_TANK_NUM	== 22			; joh017
	PRM_3G3_TANK_NUM	== 23			; joh017
	PRM_3G4_TANK_NUM	== 24			; joh017
	PRM_3G5_TANK_NUM	== 25			; joh017
	PRM_3G6_TANK_NUM	== 26			; joh017
	PRM_3G7_TANK_NUM	== 27			; joh017
	PRM_3G8_TANK_NUM	== 28			; joh017
	PRM_3G9_TANK_NUM	== 29			; joh017
	PRM_3G10_TANK_NUM	== 30			; joh017
	PRM_5F3_TANK_NUM	== 31			; joh017
	PRM_5F4_TANK_NUM	== 32			; joh017
	PRM_WATER_NUM		== 99			; rma018 end of run switches to water
	;
	CFT1_USE_BIT		== 1	
	CFT2_USE_BIT		== 2
	CFT3_USE_BIT		== 4
	CFT4_USE_BIT		== 8
	PFT1_USE_BIT		== 16
	;
	FPST_TANK_NUM		== 1
	FPST2_TANK_NUM		== 2
;*******************************************************************************
;
;		SET ERROR SUBROUTINES
;
;*******************************************************************************
	ON ERROR GOSUB ERRSUB		;define error handling routine

;===============================================================================
;
; Initialization logic
;
;===============================================================================
INIT:

	LOG_ADI = 0
	PILK_LOG_ADI = 0
	
;===============================================================================
;		MAIN LOOP
;===============================================================================
MAIN:

	IF (BAS_MCMS_RUN_FG_ALLOF7) THEN
		BEGIN
		GOSUB INITMCMSPKFG
		GOSUB FILLERCHGCHK
		GOSUB UPDATEFILLERSTRINGS
		GOSUB RELIDCLEANUP 
		BAS_MCMS_RUN_FG_ALLOF7 = 0
		END
	;	
	WAIT 1
	GOTO MAIN




;===============================================================================
;		Initialize MCMSPKINFO flags
;===============================================================================
INITMCMSPKFG:
	; will unconditionally clear the flags at the start of the loop
	; --------------------------------------------------------------------
	; If tank/ filler is inuse, flag will be set
	; If tank/ filler not inuse, flag will not be set
	;	AND release id's cleaned up at end of main loop  
	MCMSPKINFO_REL_ID_RESET_FG_ALLOF7	= 0
	;
	MCMSPKINFO_C01_FG_ALLOF7	= 0
	MCMSPKINFO_C02_FG_ALLOF7	= 0
	MCMSPKINFO_C03_FG_ALLOF7	= 0
	MCMSPKINFO_B04_FG_ALLOF7	= 0
	MCMSPKINFO_B05_FG_ALLOF7	= 0
	MCMSPKINFO_C06_FG_ALLOF7	= 0
	MCMSPKINFO_R02_FG_ALLOF7	= 0
	MCMSPKINFO_C07_FG_ALLOF7	= 0
	MCMSPKINFO_B08_FG_ALLOF7	= 0
	MCMSPKINFO_B09_FG_ALLOF7	= 0
	;
	MCMSPKINFO_1G1_FG_ALLOF7	= 0
	MCMSPKINFO_1G2_FG_ALLOF7	= 0
	MCMSPKINFO_1G3_FG_ALLOF7	= 0
	MCMSPKINFO_1G4_FG_ALLOF7	= 0
	MCMSPKINFO_1G5_FG_ALLOF7	= 0
	MCMSPKINFO_1G6_FG_ALLOF7	= 0
	MCMSPKINFO_1G7_FG_ALLOF7	= 0
	MCMSPKINFO_1G8_FG_ALLOF7	= 0
	MCMSPKINFO_1G9_FG_ALLOF7	= 0
	MCMSPKINFO_1G10_FG_ALLOF7	= 0
	MCMSPKINFO_2G1_FG_ALLOF7	= 0
	MCMSPKINFO_2G2_FG_ALLOF7	= 0
	MCMSPKINFO_2G3_FG_ALLOF7	= 0
	MCMSPKINFO_2G4_FG_ALLOF7	= 0
	MCMSPKINFO_2G5_FG_ALLOF7	= 0
	MCMSPKINFO_2G6_FG_ALLOF7	= 0
	MCMSPKINFO_2G7_FG_ALLOF7	= 0
	MCMSPKINFO_2G8_FG_ALLOF7	= 0
	MCMSPKINFO_2G9_FG_ALLOF7	= 0
	MCMSPKINFO_2G10_FG_ALLOF7	= 0
	MCMSPKINFO_3G1_FG_ALLOF7	= 0
	MCMSPKINFO_3G2_FG_ALLOF7	= 0
	MCMSPKINFO_3G3_FG_ALLOF7	= 0
	MCMSPKINFO_3G4_FG_ALLOF7	= 0
	MCMSPKINFO_3G5_FG_ALLOF7	= 0
	MCMSPKINFO_3G6_FG_ALLOF7	= 0
	MCMSPKINFO_3G7_FG_ALLOF7	= 0
	MCMSPKINFO_3G8_FG_ALLOF7	= 0
	MCMSPKINFO_3G9_FG_ALLOF7	= 0
	MCMSPKINFO_3G10_FG_ALLOF7	= 0
	MCMSPKINFO_5F4_FG_ALLOF7	= 0
	MCMSPKINFO_5F3_FG_ALLOF7	= 0
	MCMSPKINFO_CFT1_FG_ALLOF7	= 0
	MCMSPKINFO_CFT2_FG_ALLOF7	= 0
	MCMSPKINFO_CFT3_FG_ALLOF7	= 0
	MCMSPKINFO_CFT4_FG_ALLOF7	= 0
	MCMSPKINFO_PFT1_FG_ALLOF7	= 0
	MCMSPKINFO_FPST_FG_ALLOF7	= 0
	MCMSPKINFO_FPST2_FG_ALLOF7	= 0
	;joh002 begin
	C01_LINEUSE_PRT1_ALLOF7		= PRM_D3_C01_LINEUSE_PRT1:AI_MEAS
	C02_LINEUSE_PRT1_ALLOF7		= PRM_D3_C02_LINEUSE_PRT1:AI_MEAS
	C03_LINEUSE_PRT1_ALLOF7		= PRM_D3_C03_LINEUSE_PRT1:AI_MEAS
	B04_LINEUSE_PRT1_ALLOF7		= PRM_D3_B04_LINEUSE_PRT1:AI_MEAS
	B05_LINEUSE_PRT1_ALLOF7		= PRM_D3_B05_LINEUSE_PRT1:AI_MEAS
	C06_LINEUSE_PRT1_ALLOF7		= PRM_D3_C06_LINEUSE_PRT1:AI_MEAS
	C07_LINEUSE_PRT1_ALLOF7		= PRM_D3_C07_LINEUSE_PRT1:AI_MEAS
	B08_LINEUSE_PRT1_ALLOF7		= PRM_D3_B08_LINEUSE_PRT1:AI_MEAS
	R02_LINEUSE_PRT1_ALLOF7		= PRM_D3_R02_LINEUSE_PRT1:AI_MEAS
	B09_LINEUSE_PRT1_ALLOF7		= PRM_D3_B09_LINEUSE_PRT1:AI_MEAS
	;joh002 end
	;
	RETURN
	
;===============================================================================
;		GET NEXT AVAILABLE RELEASE ID
;===============================================================================
GETNEXTRELID:
	; this subroutine will loop through all release id variables
	; if it finds a match, it will go to the next possible release id
	;		
	; if it loops through all the release id's and does not find a match
	; then that is the next rel id to use

	FOR NEXT_REL_ID =	 1 TO 10
		; release ids are scattered in olbarp
   

		; release ids are scattered in olbarp
		; ZFL001 - ZFL024 is 1G1 to 3G4 (block 1)
		; ZFL030 - ZFL054 is 3G5 to B04DR
		; ZFL060 to ZFL072 is packaging
		; ZFL074
		; ZFL105
		; ZFL106
		;  __________
		; |          |
		; | Block 1  |
		; |__________|
		; 
		; ZFL001 - ZFL024 is 1G1 to 3G4 
		; NOTE ZFL025-ZFL029 is skipped in UPF!
		; ZFL030 - ZFL043 is 3G5 to 5F4 
		;
		;  __________
		; |          |
		; | Block 2  |
		; |__________|
		; MFL819 - MFL828 C01 to B09
		; NOTE: BAS had a single variable for packaging fillers
		;	BUT split into two different release ids (c01_rel_id_fl AND c01dr_rel_id
		; 	

		; ZFL074
		; ZFL105
		; ZFL106

		; ZFL001 - ZFL024 is 1G1 to 3G4 (block 1)
		ASSIGN TMP_PTR = PRT_1G1_REL_ID_FL
		;
		FOR REL_LOOP_INT = 1 TO 38				; 
				IF NEXT_REL_ID = TMP_PTR THEN
					GOTO NEXTRELIDLOOP
				;
				IF REL_LOOP_INT < 38 THEN
					STEP TMP_PTR BY 1
				;
			NEXT REL_LOOP_INT
		
		ASSIGN TMP_PTR = RELEASE_ID_C01_ALLOF7
		;
		FOR REL_LOOP_INT = 1 TO 10				; 
				IF NEXT_REL_ID = TMP_PTR THEN
					GOTO NEXTRELIDLOOP
				;
				IF REL_LOOP_INT < 10 THEN
					STEP TMP_PTR BY 1
				;
			NEXT REL_LOOP_INT
		

		ASSIGN TMP_PTR = PFT1_REL_ID_FL
		IF NEXT_REL_ID = TMP_PTR THEN
			GOTO NEXTRELIDLOOP
                
		GOTO FOUNDNEXTRELID
NEXTRELIDLOOP:					;next release id loop
		NEXT NEXT_REL_ID

	PRINT LOG_ADI, "ERROR - RELEASE ID GOT TO %i WITHOUT FREE REL ID", NEXT_REL_ID

FOUNDNEXTRELID:				; found next release id


	RETURN


;===============================================================================
;		PRINT MERGE TANK
;===============================================================================
PRINTRESETTANK:
	;                                    SG1           IN2 , SG1        IN2        
	PRINT LOG_ADI, "SEPARATE: CLEAR TANK %p RELEASE ID %i ", TANK_NAME, NEXT_REL_ID
	RETURN

;===============================================================================
;		PRINT MERGE TANK
;===============================================================================
PRINTRESETFILLER:
	;                                    SG1           IN2       IN3, SG1        IN2         , IN3
	PRINT LOG_ADI, "SEPARATE: CLEAR FILLER %p RELEASE ID %i", FILLER_SG,NEXT_REL_ID
	RETURN

;===============================================================================
;		ASSIGN TANK
;===============================================================================
ASSIGNTANK:
	TANK_NAME 							= ""    
	IF TANK_NUM = PRM_1G1_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G1" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G1_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G1
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G1_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G2_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G2" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G2_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G2
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G2_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G3_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G3" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G3_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G3
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G3_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G4_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G4" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G4_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G4
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G4_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G5_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G5" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G5_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G5
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G5_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G6_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G6" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G6_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G6
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G6_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G7_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G7" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G7_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G7
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G7_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G8_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G8" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G8_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G8
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G8_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G9_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "1G9" 
		ASSIGN TANK_REL_ID_PTR					= PRT_1G9_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G9
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G9_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_1G10_TANK_NUM THEN                            
		BEGIN                                                   
		TANK_NAME 						= "1G10"
		ASSIGN TANK_REL_ID_PTR					= PRT_1G10_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_1G10
		ASSIGN TANK_BRAND_SG_PTR				= PRT_1G10_BRAND_SG
		END                                                     
	;                                                               

	IF TANK_NUM = PRM_2G1_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G1" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G1_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G1
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G1_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G2_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G2" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G2_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G2
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G2_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G3_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G3" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G3_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G3
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G3_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G4_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G4" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G4_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G4
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G4_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G5_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G5" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G5_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G5
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G5_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G6_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G6" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G6_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G6
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G6_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G7_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G7" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G7_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G7
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G7_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G8_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G8" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G8_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G8
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G8_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G9_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "2G9" 
		ASSIGN TANK_REL_ID_PTR					= PRT_2G9_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G9
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G9_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_2G10_TANK_NUM THEN                            
		BEGIN                                                   
		TANK_NAME 						= "2G10"
		ASSIGN TANK_REL_ID_PTR					= PRT_2G10_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_2G10
		ASSIGN TANK_BRAND_SG_PTR				= PRT_2G10_BRAND_SG
		END                                                     
	;                                                               
	IF TANK_NUM = PRM_3G1_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G1" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G1_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G1
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G1_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G2_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G2" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G2_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G2
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G2_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G3_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G3" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G3_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G3
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G3_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G4_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G4" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G4_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G4
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G4_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G5_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G5" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G5_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G5
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G5_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G6_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G6" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G6_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G6
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G6_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G7_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G7" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G7_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G7
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G7_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G8_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G8" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G8_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G8
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G8_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G9_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "3G9" 
		ASSIGN TANK_REL_ID_PTR					= PRT_3G9_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G9
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G9_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_3G10_TANK_NUM THEN                            
		BEGIN                                                   
		TANK_NAME 						= "3G10"
		ASSIGN TANK_REL_ID_PTR					= PRT_3G10_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_3G10
		ASSIGN TANK_BRAND_SG_PTR				= PRT_3G10_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_5F3_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "5F3" 
		ASSIGN TANK_REL_ID_PTR					= DYN_5F3_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_5F3
		ASSIGN TANK_BRAND_SG_PTR				= DYN_5F3_BRAND_SG
		END                                                     
	IF TANK_NUM = PRM_5F4_TANK_NUM THEN                             
		BEGIN                                                   
		TANK_NAME 						= "5F4" 
		ASSIGN TANK_REL_ID_PTR					= DYN_5F4_REL_ID_FL
;		ASSIGN TANK_LAB_STAT_PTR				= MCMS_LAB_STAT_5F4
		ASSIGN TANK_BRAND_SG_PTR				= DYN_5F4_BRAND_SG
		END                                                     
	;                                                               
	IF TANK_NUM = PRM_WATER_NUM THEN                                
		BEGIN                                                   
		TANK_NAME 						= "WATER"
		ASSIGN TANK_REL_ID_PTR					= DMMY_REL_ID
;		ASSIGN TANK_LAB_STAT_PTR				= DMMY_LAB_STAT_ALLOF7
		ASSIGN TANK_BRAND_SG_PTR				= DMMY_TANK_BRAND
		END
	RETURN
;===============================================================================
;		RESET RELEASE ID
;===============================================================================
RESETRELID:
;	Usage
;	When there are multiple fillers, BBT stitched togeter and a new flow path is opened up
;	to separate lines, need to recalculate the release ID's
;	- Will clear the release ID and the last line use intger to recalculate the relase id's
;
;	NEXT_REL_ID 	= 1		;release ID to recalculate
;	GOSUB RESETLID		; all equipment with rel id 2 updated to release id 1
	; PRT's 1G1 to 3G10
	IF (NEXT_REL_ID < 1) THEN			; escape logic if Release ID is less than 1 (not valid)
		RETURN

       	IF (PRT_1G1_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G1"
		GOSUB PRINTRESETTANK
		PRT_1G1_REL_ID_FL = 0
		END
	IF (PRT_1G2_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G2"
		GOSUB PRINTRESETTANK
		PRT_1G2_REL_ID_FL = 0
		END
	IF (PRT_1G3_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G3"
		GOSUB PRINTRESETTANK
		PRT_1G3_REL_ID_FL = 0
		END
	IF (PRT_1G4_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G4"
		GOSUB PRINTRESETTANK
		PRT_1G4_REL_ID_FL = 0
		END
	IF (PRT_1G5_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G5"
		GOSUB PRINTRESETTANK
		PRT_1G5_REL_ID_FL = 0
		END
	IF (PRT_1G6_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G6"
		GOSUB PRINTRESETTANK
		PRT_1G6_REL_ID_FL = 0
		END
	IF (PRT_1G7_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G7"
		GOSUB PRINTRESETTANK
		PRT_1G7_REL_ID_FL = 0
		END
	IF (PRT_1G8_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G8"
		GOSUB PRINTRESETTANK
		PRT_1G8_REL_ID_FL = 0
		END
	IF (PRT_1G9_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G9"
		GOSUB PRINTRESETTANK
		PRT_1G9_REL_ID_FL = 0
		END
	IF (PRT_1G10_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "1G10"
		GOSUB PRINTRESETTANK
		PRT_1G10_REL_ID_FL = 0
		END
	IF (PRT_2G1_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G1"
		GOSUB PRINTRESETTANK
		PRT_2G1_REL_ID_FL = 0
		END
	IF (PRT_2G2_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G2"
		GOSUB PRINTRESETTANK
		PRT_2G2_REL_ID_FL = 0
		END
	IF (PRT_2G3_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G3"
		GOSUB PRINTRESETTANK
		PRT_2G3_REL_ID_FL = 0
		END
	IF (PRT_2G4_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G4"
		GOSUB PRINTRESETTANK
		PRT_2G4_REL_ID_FL = 0
		END
	IF (PRT_2G5_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G5"
		GOSUB PRINTRESETTANK
		PRT_2G5_REL_ID_FL = 0
		END
	IF (PRT_2G6_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G6"
		GOSUB PRINTRESETTANK
		PRT_2G6_REL_ID_FL = 0
		END
	IF (PRT_2G7_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G7"
		GOSUB PRINTRESETTANK
		PRT_2G7_REL_ID_FL = 0
		END
	IF (PRT_2G8_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G8"
		GOSUB PRINTRESETTANK
		PRT_2G8_REL_ID_FL = 0
		END
	IF (PRT_2G9_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G9"
		GOSUB PRINTRESETTANK
		PRT_2G9_REL_ID_FL = 0
		END
	IF (PRT_2G10_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "2G10"
		GOSUB PRINTRESETTANK
		PRT_2G10_REL_ID_FL = 0
		END
	IF (PRT_3G1_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G1"
		GOSUB PRINTRESETTANK
		PRT_3G1_REL_ID_FL = 0
		END
	IF (PRT_3G2_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G2"
		GOSUB PRINTRESETTANK
		PRT_3G2_REL_ID_FL = 0
		END
	IF (PRT_3G3_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G3"
		GOSUB PRINTRESETTANK
		PRT_3G3_REL_ID_FL = 0
		END
	IF (PRT_3G4_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G4"
		GOSUB PRINTRESETTANK
		PRT_3G4_REL_ID_FL = 0
		END
	IF (PRT_3G5_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G5"
		GOSUB PRINTRESETTANK
		PRT_3G5_REL_ID_FL = 0
		END
	IF (PRT_3G6_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G6"
		GOSUB PRINTRESETTANK
		PRT_3G6_REL_ID_FL = 0
		END
	IF (PRT_3G7_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G7"
		GOSUB PRINTRESETTANK
		PRT_3G7_REL_ID_FL = 0
		END
	IF (PRT_3G8_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G8"
		GOSUB PRINTRESETTANK
		PRT_3G8_REL_ID_FL = 0
		END
	IF (PRT_3G9_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G9"
		GOSUB PRINTRESETTANK
		PRT_3G9_REL_ID_FL = 0
		END
	IF (PRT_3G10_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "3G10"
		GOSUB PRINTRESETTANK
		PRT_3G10_REL_ID_FL = 0
		END
	; Dyn Release
	IF (DYN_5F4_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "5F4"
		GOSUB PRINTRESETTANK
		DYN_5F4_REL_ID_FL = 0
		END
	IF (DYN_5F3_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "5F3"
		GOSUB PRINTRESETTANK
		DYN_5F3_REL_ID_FL = 0
		END
	; Draft Surge Tanks
	IF (CFT1_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "CFT1"
		GOSUB PRINTRESETTANK
		CFT1_REL_ID_FL = 0
		END
	IF (CFT2_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "CFT2"
		GOSUB PRINTRESETTANK
		CFT2_REL_ID_FL = 0
		END
	IF (CFT3_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "CFT3"
		GOSUB PRINTRESETTANK
		CFT3_REL_ID_FL = 0
		END
	IF (CFT4_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "CFT4"
		GOSUB PRINTRESETTANK
		CFT4_REL_ID_FL = 0
		END
	IF (PFT1_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "PFT1"
		GOSUB PRINTRESETTANK
		PFT1_REL_ID_FL = 0
		END
	; Draft Surge Tanks
	IF (FPST_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "FPST"
		GOSUB PRINTRESETTANK
		FPST_REL_ID_FL = 0
		END
	IF (FPST2_REL_ID_FL = NEXT_REL_ID) THEN
		BEGIN
		TANK_NAME = "FPST2"
		GOSUB PRINTRESETTANK
		FPST2_REL_ID_FL = 0
		END
	; Filler Headers
	IF (RELEASE_ID_C01_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "C01"
		TANK_NUM = LAST_C01_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_C01_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_C01_ALLOF7 = 0   
		C01_REL_ID_FL = 0
		C01DR_REL_ID_FL = 0
		;	     
		LAST_C01_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_C01_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_C02_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "C02"
		TANK_NUM = LAST_C02_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_C02_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_C02_ALLOF7 = 0   
		C02_REL_ID_FL = 0
		C02DR_REL_ID_FL = 0
		;	     
		LAST_C02_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_C02_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_C03_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "C03"
		TANK_NUM = LAST_C03_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_C03_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_C03_ALLOF7 = 0   
		C03_REL_ID_FL = 0
		C03DR_REL_ID_FL = 0
		;	     
		LAST_C03_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_C03_LINEUSE_ALLOF7	 = 0
		END
	IF (RELEASE_ID_B04_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "B04"
		TANK_NUM = LAST_B04_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_B04_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_B04_ALLOF7 = 0   
		B04_REL_ID_FL = 0
		B04DR_REL_ID_FL = 0
		;	     
		LAST_B04_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_B04_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_B05_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "B05"
		TANK_NUM = LAST_B05_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_B05_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_B05_ALLOF7 = 0   
		B05_REL_ID_FL = 0
		B05DR_REL_ID_FL = 0
		;	     
		LAST_B05_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_B05_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_C06_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "C06"
		TANK_NUM = LAST_C06_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_C06_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_C06_ALLOF7 = 0   
		C06_REL_ID_FL = 0
		C06DR_REL_ID_FL = 0
		;	     
		LAST_C06_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_C06_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_R02_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "R02"
		TANK_NUM = LAST_R02_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_R02_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_R02_ALLOF7 = 0   
		R02_REL_ID_FL = 0
		R02DR_REL_ID_FL = 0
		;	     
		LAST_R02_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_R02_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_C07_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "C07"
		TANK_NUM = LAST_C07_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_C07_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_C07_ALLOF7 = 0   
		C07_REL_ID_FL = 0
		C07DR_REL_ID_FL = 0
		;	     
		LAST_C07_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_C07_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_B08_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "B08"
		TANK_NUM = LAST_B08_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_B08_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_B08_ALLOF7 = 0   
		B08_REL_ID_FL = 0
		B08DR_REL_ID_FL = 0
		;	     
		LAST_B08_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_B08_LINEUSE_ALLOF7 = 0
		END
	IF (RELEASE_ID_B09_ALLOF7 = NEXT_REL_ID) THEN
		BEGIN
		FILLER_SG = "B09"
		TANK_NUM = LAST_B09_LINEUSE_PRT1_ALLOF7
		FILLER_DRAFT_USE = LAST_DRAFT_B09_LINEUSE_ALLOF7
		GOSUB PRINTRESETFILLER
		;	     
		RELEASE_ID_B09_ALLOF7 = 0   
		B09_REL_ID_FL = 0
		B09DR_REL_ID_FL = 0
		;	     
		LAST_B09_LINEUSE_PRT1_ALLOF7 = 0
		LAST_DRAFT_B09_LINEUSE_ALLOF7 = 0
		LAST_FPST_HR09_SUPPLY_TNK_NUM_ALLOF7 = 0
		END
	;	
	RETURN

;===============================================================================
;		PRINT MERGE TANK
;===============================================================================
PRINTMERGETANK:
	;
	PRINT LOG_ADI, "MERGE TANK %p RELEASE ID FROM %i TO %i", TANK_NAME,TMP_INT, NEXT_REL_ID
	RETURN

;===============================================================================
;		PRINT MERGE TANK
;===============================================================================
PRINTMERGEFILLER:
	;
	PRINT LOG_ADI, "MERGE FILLER %p RELEASE ID FROM %i TO %i", FILLER_SG,TMP_INT, NEXT_REL_ID
	RETURN


;===============================================================================
;		MERGE RELEASE ID
;===============================================================================
MERGERELID:
;	Usage
;	When there are two independent BBT to filler links are opened together, 
;	will replace all of one Release ID with the other Release ID
;	
;	TMP_INT 	= 2		;old release id to be updated
;	NEXT_REL_ID 	= 1		;new release id
;	GOSUB MERGERELID	; all equipment with rel id 2 updated to release id 1
	;
	; this subroutine will loop through all release id variables
	; if it finds a match, it will go to the next possible release id
	;		
	; if it loops through all the release id's and does not find a match
	; then that is the next rel id to use
	IF (PRT_1G1_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G1"
		GOSUB PRINTMERGETANK
		PRT_1G1_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G2_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G2"
		GOSUB PRINTMERGETANK
		PRT_1G2_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G3_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G3"
		GOSUB PRINTMERGETANK
		PRT_1G3_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G4_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G4"
		GOSUB PRINTMERGETANK
		PRT_1G4_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G5_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G5"
		GOSUB PRINTMERGETANK
		PRT_1G5_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G6_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G6"
		GOSUB PRINTMERGETANK
		PRT_1G6_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G7_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G7"
		GOSUB PRINTMERGETANK
		PRT_1G7_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G8_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G8"
		GOSUB PRINTMERGETANK
		PRT_1G8_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G9_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G9"
		GOSUB PRINTMERGETANK
		PRT_1G9_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_1G10_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "1G10"
		GOSUB PRINTMERGETANK
		PRT_1G10_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G1_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G1"
		GOSUB PRINTMERGETANK
		PRT_2G1_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G2_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G2"
		GOSUB PRINTMERGETANK
		PRT_2G2_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G3_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G3"
		GOSUB PRINTMERGETANK
		PRT_2G3_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G4_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G4"
		GOSUB PRINTMERGETANK
		PRT_2G4_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G5_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G5"
		GOSUB PRINTMERGETANK
		PRT_2G5_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G6_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G6"
		GOSUB PRINTMERGETANK
		PRT_2G6_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G7_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G7"
		GOSUB PRINTMERGETANK
		PRT_2G7_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G8_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G8"
		GOSUB PRINTMERGETANK
		PRT_2G8_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G9_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G9"
		GOSUB PRINTMERGETANK
		PRT_2G9_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_2G10_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "2G10"
		GOSUB PRINTMERGETANK
		PRT_2G10_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G1_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G1"
		GOSUB PRINTMERGETANK
		PRT_3G1_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G2_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G2"
		GOSUB PRINTMERGETANK
		PRT_3G2_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G3_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G3"
		GOSUB PRINTMERGETANK
		PRT_3G3_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G4_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G4"
		GOSUB PRINTMERGETANK
		PRT_3G4_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G5_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G5"
		GOSUB PRINTMERGETANK
		PRT_3G5_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G6_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G6"
		GOSUB PRINTMERGETANK
		PRT_3G6_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G7_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G7"
		GOSUB PRINTMERGETANK
		PRT_3G7_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G8_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G8"
		GOSUB PRINTMERGETANK
		PRT_3G8_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G9_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G9"
		GOSUB PRINTMERGETANK
		PRT_3G9_REL_ID_FL = NEXT_REL_ID
		END
	IF (PRT_3G10_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "3G10"
		GOSUB PRINTMERGETANK
		PRT_3G10_REL_ID_FL = NEXT_REL_ID
		END
	IF (DYN_5F4_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "5F4"
		GOSUB PRINTMERGETANK
		DYN_5F4_REL_ID_FL = NEXT_REL_ID
		END
	IF (DYN_5F3_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "5F3"
		GOSUB PRINTMERGETANK
		DYN_5F3_REL_ID_FL = NEXT_REL_ID
		END
	IF (CFT1_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "CFT1"
		GOSUB PRINTMERGETANK
		CFT1_REL_ID_FL = NEXT_REL_ID
		END
	IF (CFT2_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "CFT2"
		GOSUB PRINTMERGETANK
		CFT2_REL_ID_FL = NEXT_REL_ID
		END
	IF (CFT3_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "CFT3"
		GOSUB PRINTMERGETANK
		CFT3_REL_ID_FL = NEXT_REL_ID
		END
	IF (CFT4_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "CFT4"
		GOSUB PRINTMERGETANK
		CFT4_REL_ID_FL = NEXT_REL_ID
		END
	IF (PFT1_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "PFT1"
		GOSUB PRINTMERGETANK
		PFT1_REL_ID_FL = NEXT_REL_ID
		END
	IF (FPST_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "FPST"
		GOSUB PRINTMERGETANK
		FPST_REL_ID_FL = NEXT_REL_ID
		END
	IF (FPST2_REL_ID_FL = TMP_INT) THEN
		BEGIN
		TANK_NAME = "FPST2"
		GOSUB PRINTMERGETANK
		FPST2_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_C01_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "C01"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_C01_ALLOF7 = NEXT_REL_ID
		;
		IF (C01_REL_ID_FL > 0) THEN
			C01_REL_ID_FL = NEXT_REL_ID
		IF (C01DR_REL_ID_FL > 0) THEN
			C01DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_C02_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "C02"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_C02_ALLOF7 = NEXT_REL_ID
		;
		IF (C02_REL_ID_FL > 0) THEN
			C02_REL_ID_FL = NEXT_REL_ID
		IF (C02DR_REL_ID_FL > 0) THEN
			C02DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_C03_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "C03"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_C03_ALLOF7 = NEXT_REL_ID
		;
		IF (C03_REL_ID_FL > 0) THEN
			C03_REL_ID_FL = NEXT_REL_ID
		IF (C03DR_REL_ID_FL > 0) THEN
			C03DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_B04_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "B04"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_B04_ALLOF7 = NEXT_REL_ID
		;
		IF (B04_REL_ID_FL > 0) THEN
			B04_REL_ID_FL = NEXT_REL_ID
		IF (B04DR_REL_ID_FL > 0) THEN
			B04DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_B05_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "B05"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_B05_ALLOF7 = NEXT_REL_ID
		;
		IF (B05_REL_ID_FL > 0) THEN
			B05_REL_ID_FL = NEXT_REL_ID
		IF (B05DR_REL_ID_FL > 0) THEN
			B05DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_C06_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "C06"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_C06_ALLOF7 = NEXT_REL_ID
		;
		IF (C06_REL_ID_FL > 0) THEN
			C06_REL_ID_FL = NEXT_REL_ID
		IF (C06DR_REL_ID_FL > 0) THEN
			C06DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_R02_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "R02"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_R02_ALLOF7 = NEXT_REL_ID
		;
		IF (R02_REL_ID_FL > 0) THEN
			R02_REL_ID_FL = NEXT_REL_ID
		IF (R02DR_REL_ID_FL > 0) THEN
			R02DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_C07_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "C07"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_C07_ALLOF7 = NEXT_REL_ID
		;
		IF (C07_REL_ID_FL > 0) THEN
			C07_REL_ID_FL = NEXT_REL_ID
		IF (C07DR_REL_ID_FL > 0) THEN
			C07DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_B08_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "B08"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_B08_ALLOF7 = NEXT_REL_ID
		;
		IF (B08_REL_ID_FL > 0) THEN
			B08_REL_ID_FL = NEXT_REL_ID
		IF (B08DR_REL_ID_FL > 0) THEN
			B08DR_REL_ID_FL = NEXT_REL_ID
		END
	IF (RELEASE_ID_B09_ALLOF7 = TMP_INT) THEN
		BEGIN
		FILLER_SG = "B09"
		GOSUB PRINTMERGEFILLER
		RELEASE_ID_B09_ALLOF7 = NEXT_REL_ID
		;
		IF (B09_REL_ID_FL > 0) THEN
			B09_REL_ID_FL = NEXT_REL_ID
		IF (B09DR_REL_ID_FL > 0) THEN
			B09DR_REL_ID_FL = NEXT_REL_ID
		END

	RETURN


;===============================================================================
;		TANK USE COUNT
;===============================================================================
NONDRAFTTANKUSECOUNT:

	USE_COUNT = 0
	; sum up the number of fillers currently using the tank
;joh002	IF (PRM_D3_C01_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (C01_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_C02_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (C02_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_C03_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (C03_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_B04_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (B04_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_B05_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (B05_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_C06_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (C06_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_C07_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (C07_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_B08_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (B08_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_B09_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (B09_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
;joh002	IF (PRM_D3_R02_LINEUSE_PRT1:AI_MEAS = TANK_NUM ) THEN
	IF (R02_LINEUSE_PRT1_ALLOF7 = TANK_NUM ) THEN			;joh002
		USE_COUNT = USE_COUNT + 1
	;
	
	RETURN
;===============================================================================
;		DRAFT TANK USE COUNT
;===============================================================================
DRAFTTANKUSECOUNT:

	USE_COUNT = 0
	IF AND(DRAFT_C01_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
	IF AND(DRAFT_C02_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
;	IF AND(DRAFT_C03_LINEUSE_ALLOF7, TANK_NUM) THEN
;		USE_COUNT = USE_COUNT + 1                   
	IF AND(DRAFT_B04_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
	IF AND(DRAFT_B05_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
	IF AND(DRAFT_C06_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
;	IF AND(DRAFT_C07_LINEUSE_ALLOF7, TANK_NUM) THEN
;		USE_COUNT = USE_COUNT + 1                   
;	IF AND(DRAFT_B08_LINEUSE_ALLOF7, TANK_NUM) THEN
;		USE_COUNT = USE_COUNT + 1                   
	IF AND(DRAFT_B09_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
	IF AND(DRAFT_R02_LINEUSE_ALLOF7, TANK_NUM) THEN
		USE_COUNT = USE_COUNT + 1                   
		

	RETURN





;===============================================================================
;		UPDATE RELEASE ID
;===============================================================================
UPDATERELID:
	EX1_FG = (TANK_REL_ID_PTR > 0)
	EX2_FG = (FILLER_REL_ID_PTR > 0)
	;	
	IF EX1_FG & EX2_FG & (TANK_REL_ID_PTR != FILLER_REL_ID_PTR) THEN
		BEGIN
		EX1_FG = INSTR(TANK_NAME,"CFT1")|INSTR(TANK_NAME,"CFT2")|INSTR(TANK_NAME,"CFT3")
		EX2_FG = INSTR(TANK_NAME,"CFT4")|INSTR(TANK_NAME,"PFT1")
		IF EX1_FG | EX2_FG THEN
			GOSUB DRAFTTANKUSECOUNT
		ELSE
			GOSUB NONDRAFTTANKUSECOUNT
		
;		IF (USE_COUNT < 2) THEN
;			BEGIN
			NEXT_REL_ID = TANK_REL_ID_PTR
			TMP_INT = FILLER_REL_ID_PTR
			PRINT LOG_ADI, "MERGE TANK %p REL ID %i FILLER %p REL ID %i", TANK_NAME, NEXT_REL_ID,FILLER_SG,TMP_INT
			GOSUB MERGERELID
			;		
			NEXT_REL_ID = TANK_REL_ID_PTR
			PRINT LOG_ADI, "1. UPDATE REL ID FILLER %p REL ID %i", FILLER_SG, NEXT_REL_ID
			;		
;			END
;		ELSE
;			BEGIN
;;			should I clear lab status?
;			NEXT_REL_ID = TANK_REL_ID_PTR			;johxxx 
;			GOSUB RESETRELID				;johxxx 
;			NEXT_REL_ID = FILLER_REL_ID_PTR			;johxxx 
;			GOSUB RESETRELID				;johxxx 
;			;		
;			NEXT_REL_ID = TANK_REL_ID_PTR
;			PRINT LOG_ADI, "1. RESET REL ID FILLER %p REL ID %i", FILLER_SG, NEXT_REL_ID
;			;		
;
;			END
		;MCMSPKINFO_REL_ID_RESET_FG_ALLOF7 = 1
		END
	ELSE IF EX1_FG & (EX2_FG = 0) THEN
		BEGIN
		NEXT_REL_ID = TANK_REL_ID_PTR
		TMP_INT = FILLER_REL_ID_PTR
		PRINT LOG_ADI, "2. UDATE FILLER %p TO RELEASE ID %i", FILLER_SG,NEXT_REL_ID
		FILLER_REL_ID_PTR = NEXT_REL_ID
		END
	ELSE IF (EX1_FG = 0) & EX2_FG THEN
		BEGIN
		NEXT_REL_ID = FILLER_REL_ID_PTR
		TMP_INT = TANK_REL_ID_PTR
		PRINT LOG_ADI, "3. UDATE TANK %p TO RELEASE ID %i", TANK_NAME,NEXT_REL_ID
		TANK_REL_ID_PTR = NEXT_REL_ID
		END
	ELSE IF (EX1_FG = 0) & (EX2_FG = 0) THEN
		BEGIN
		GOSUB GETNEXTRELID
		PRINT LOG_ADI, "4. UDATE FILLER %p TO RELEASE ID %i", FILLER_SG,NEXT_REL_ID
		PRINT LOG_ADI, "5. UDATE TANK %p TO RELEASE ID %i", TANK_NAME,NEXT_REL_ID
		TANK_REL_ID_PTR = NEXT_REL_ID
		FILLER_REL_ID_PTR = NEXT_REL_ID
		END
	;
	RETURN
	
;===============================================================================
;		UPDATE FILLER BRAND
;===============================================================================
UPDATEBRAND:

	
	EX1_FG =  ( INSTR(TANK_BRAND_SG_PTR, FILLER_BRAND_PTR) = 0)
	EX2_FG =  ( STRLEN(TANK_BRAND_SG_PTR) != STRLEN(FILLER_BRAND_PTR) )

	IF (EX1_FG | EX2_FG ) & (STRLEN(TANK_BRAND_SG_PTR) > 0) THEN
		BEGIN
		TMP_SG = TANK_BRAND_SG_PTR
		PRINT LOG_ADI, "UDATE FILLER %p BRAND %p FROM TANK %p",FILLER_SG,TMP_SG,TANK_NAME
		FILLER_BRAND_PTR = TANK_BRAND_SG_PTR
		END
	RETURN
	
;===============================================================================
;		BUILD TANK LIST
;===============================================================================
BUILDTANKLIST:
	; Usage 
	;
	
;	FILLER_SG 							= "C01
;	FILLER_INUSE_INT					= PRM_D3_C01_LINEUSE_PRT1:AI_MEAS
;	FILLER_DRAFT_USE					= DRAFT_C01_LINEUSE_ALLOF7
;	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_C01_ALLOF7
;	ASSIGN NONDRAFT_REL_ID_PTR		= C01_REL_ID_FL
;	ASSIGN DRAFT_REL_ID_PTR			= C01DR_REL_ID_FL
;	ASSIGN FILLER_BRAND_PTR			= C01_BRAND_SG
;	ASSIGN FILLER_FG_PTR			= MCMSPKINFO_C01_FG_ALLOF7
;	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_C01_LINEUSE_ALLOF7
;	NEXT_REL_ID = FILLER_REL_ID_PTR
;	GOSUB BUILDTANKLIST	
	; 
	TMP_SG = "" 		; clear string
	;
	
	;CFT1
	IF AND(FILLER_DRAFT_USE, CFT1_USE_BIT) THEN
		BEGIN
		TANK_NUM  = CFT1_USE_BIT
		TANK_NAME = "CFT1"
		ASSIGN TANK_BRAND_SG_PTR				= CFT1_BRAND_SG
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_CFT1_FG_ALLOF7 = 1               ;tank inuse
		ASSIGN TANK_REL_ID_PTR = CFT1_REL_ID_FL
		GOSUB UPDATERELID
		GOSUB UPDATEBRAND
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR			;joh007
		DRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	;CFT2
	IF AND(FILLER_DRAFT_USE, CFT2_USE_BIT) THEN
		BEGIN
		TANK_NUM  = CFT2_USE_BIT
		TANK_NAME = "CFT2"
		ASSIGN TANK_BRAND_SG_PTR				= CFT2_BRAND_SG
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_CFT2_FG_ALLOF7 = 1
		ASSIGN TANK_REL_ID_PTR = CFT2_REL_ID_FL
		GOSUB UPDATERELID
		GOSUB UPDATEBRAND
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR			;joh007
		DRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	;CFT3
	IF AND(FILLER_DRAFT_USE, CFT3_USE_BIT) THEN
		BEGIN
		TANK_NUM  = CFT3_USE_BIT
		TANK_NAME = "CFT3"
		ASSIGN TANK_BRAND_SG_PTR				= CFT3_BRAND_SG
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_CFT3_FG_ALLOF7 = 1
		ASSIGN TANK_REL_ID_PTR = CFT3_REL_ID_FL
		GOSUB UPDATERELID
		GOSUB UPDATEBRAND
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR			;joh007
		DRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	;CFT4
	IF AND(FILLER_DRAFT_USE, CFT4_USE_BIT) THEN
		BEGIN
		TANK_NUM  = CFT4_USE_BIT
		TANK_NAME = "CFT4"
		ASSIGN TANK_BRAND_SG_PTR				= CFT4_BRAND_SG
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_CFT4_FG_ALLOF7 = 1
		ASSIGN TANK_REL_ID_PTR = CFT4_REL_ID_FL
		GOSUB UPDATERELID
		GOSUB UPDATEBRAND
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR			;joh007
		DRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	;PFT1
	IF AND(FILLER_DRAFT_USE, PFT1_USE_BIT) THEN
		BEGIN
		TANK_NUM  = PFT1_USE_BIT
		TANK_NAME = "PFT1"
		ASSIGN TANK_BRAND_SG_PTR				= PFT1_BRAND_SG
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_PFT1_FG_ALLOF7 = 1
		ASSIGN TANK_REL_ID_PTR = PFT1_REL_ID_FL
		GOSUB UPDATERELID
		GOSUB UPDATEBRAND
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR			;joh007
		DRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G1_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G1_TANK_NUM
		GOSUB ASSIGNTANK
		;
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G1_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G1_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G2_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G2_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G2_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G2_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G3_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G3_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G3_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G3_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G4_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G4_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G4_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G4_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G5_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G5_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G5_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G5_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G6_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G6_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G6_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G6_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G7_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G7_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G7_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G7_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G8_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G8_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G8_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G8_REL_ID_FL
		GOSUB UPDATERELID
		GOSUB UPDATEBRAND
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G9_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G9_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G9_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G9_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_1G10_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_1G10_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_1G10_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_1G10_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G1_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G1_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G1_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G1_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G2_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G2_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G2_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G2_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G3_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G3_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G3_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G3_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G4_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G4_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G4_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G4_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G5_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G5_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G5_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G5_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G6_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G6_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G6_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G6_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G7_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G7_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G7_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G7_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G8_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G8_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G8_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G8_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G9_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G9_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G9_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G9_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_2G10_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_2G10_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_2G10_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_2G10_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G1_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G1_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G1_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G1_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G2_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G2_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G2_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G2_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G3_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G3_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G3_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G3_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G4_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G4_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G4_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G4_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G5_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G5_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G5_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G5_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G6_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G6_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G6_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G6_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G7_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G7_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G7_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G7_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G8_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G8_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G8_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G8_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G9_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G9_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G9_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G9_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_3G10_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_3G10_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_3G10_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = PRT_3G10_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_5F3_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_5F3_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_5F3_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = DYN_5F3_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END
	IF (FILLER_INUSE_INT = PRM_5F4_TANK_NUM) THEN
		BEGIN
		TANK_NUM  = PRM_5F4_TANK_NUM
		GOSUB ASSIGNTANK
		TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
		FILLER_FG_PTR = 1									;filler inuse
		MCMSPKINFO_5F4_FG_ALLOF7 = 1			;tank inuse
		ASSIGN TANK_REL_ID_PTR = DYN_5F4_REL_ID_FL
		GOSUB UPDATERELID
		;only look at fpst/ fpst2 (unless coming from CFT/PFT tanks)	;joh008
		IF COMPAR(FILLER_SG,"B09",3,NE) THEN				;joh008
			BEGIN							;joh008
			GOSUB UPDATEBRAND
			END							;joh008
		NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
		END

	IF INSTR(FILLER_SG,"B09") THEN
		BEGIN
		; 1) pass brand from BBT selected by B09 tank picker
;joh002		TANK_NUM = PRM_D3_B09_LINEUSE_PRT1:AI_MEAS
		TANK_NUM = B09_LINEUSE_PRT1_ALLOF7			;joh002
		GOSUB ASSIGNTANK
		EX1_FG = COMPAR(TANK_NAME,"WATER",5,NE)
		IF (STRLEN(TANK_NAME) > 1) & EX1_FG THEN
			MCMS_BRAND_FP = TANK_BRAND_SG_PTR
		;
		; 2) Manage the FPST & FPST2 brands based on which tank is being filled by Flash Past
;		IF FP_FPST_FILL_TANK_NUM:AI_INVL = FPST_TANK_NUM THEN
;			FPST_BRAND_SG = MCMS_BRAND_FP
;		IF FP_FPST_FILL_TANK_NUM:AI_INVL = FPST2_TANK_NUM THEN
;			FPST2_BRAND_SG = MCMS_BRAND_FP
;		IF (FP_FPST_FILL_TANK_NUM:AI_INVL = FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS) & (FP_FPST_FILL_TANK_NUM:AI_INVL > 0)  THEN
;			FILLER_INUSE_INT = PRM_D3_B09_LINEUSE_PRT1:AI_MEAS			
;		ELSE
;			FILLER_INUSE_INT = 0			
		IF ((FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS) = FPST_TANK_NUM) THEN
			BEGIN
			TANK_NUM  = FPST_TANK_NUM
			TANK_NAME = "FPST"
			TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
			FILLER_FG_PTR = 1							;filler inuse
			MCMSPKINFO_FPST_FG_ALLOF7 = 1
			ASSIGN TANK_REL_ID_PTR = FPST_REL_ID_FL
			ASSIGN TANK_BRAND_SG_PTR = FPST_BRAND_SG				;joh008
			GOSUB UPDATERELID
			GOSUB UPDATEBRAND							;joh008
			NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
			END
		IF (FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS = FPST2_TANK_NUM) THEN
			BEGIN
			TANK_NUM  = FPST_TANK_NUM
			TANK_NAME = "FPST2"
			TMP_INT = APPEND(TMP_SG,TMP_SG,TANK_NAME,",")
			FILLER_FG_PTR = 1							;filler inuse
			MCMSPKINFO_FPST2_FG_ALLOF7 = 1
			ASSIGN TANK_REL_ID_PTR = FPST2_REL_ID_FL
			ASSIGN TANK_BRAND_SG_PTR = FPST2_BRAND_SG				;joh008
			GOSUB UPDATERELID
			NONDRAFT_REL_ID_PTR = FILLER_REL_ID_PTR
			GOSUB UPDATEBRAND							;joh008
			END
		;
		;joh008 begin
		IF (FILLER_DRAFT_USE <1 ) & (FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS < 1 ) THEN
			BEGIN
			TMP_SG = FILLER_BRAND_PTR	;egs005
			; three spaces					;joh006
			IF COMPAR(TMP_SG, "   ",3,NE) THEN		;joh006
				BEGIN
				PRINT LOG_ADI, "FILLER %p BRAND %p SET TO EMPTY",FILLER_SG,TMP_SG
				FILLER_BRAND_PTR = "   "		;egs004
				; think this will set the 
				END
			END
		;joh008 end

		; leave after all other code
		LAST_FPST_HR09_SUPPLY_TNK_NUM_ALLOF7 = FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS
		END
	ELSE		; if not B09 					;joh008
		BEGIN							;joh008
		;joh003 begin
		; if not used on Draft
		; AND Water on Non-Draft
		; THEN set to "W "
		IF (FILLER_DRAFT_USE <1 ) & (FILLER_INUSE_INT = 99) THEN
			BEGIN
;egs005			TMP_SG = TANK_BRAND_SG_PTR
			TMP_SG = FILLER_BRAND_PTR	;egs005
;egs004			IF COMPAR(TMP_SG, "W ",2,NE) THEN
;joh006			IF (STRLEN(TMP_SG) > 1) THEN	;egs004
			; three spaces					;joh006
			IF COMPAR(TMP_SG, "   ",3,NE) THEN		;joh006
				BEGIN
				PRINT LOG_ADI, "FILLER %p BRAND %p SET TO EMPTY",FILLER_SG,TMP_SG
;joh006				FILLER_BRAND_PTR = ""		;egs004
				FILLER_BRAND_PTR = "   "		;egs004
;				FILLER_BRAND_PTR = "EMPTY"		
				; think this will set the 
				END
;egs004			FILLER_BRAND_PTR = "W  "		
			END
		; if not used on Draft
		; AND note used on Non-Draft
		ELSE IF (FILLER_DRAFT_USE <1 ) & (FILLER_INUSE_INT < 1) THEN
			BEGIN
;egs005			TMP_SG = TANK_BRAND_SG_PTR
			TMP_SG = FILLER_BRAND_PTR	;egs005
;joh006			IF (STRLEN(TMP_SG) > 1) THEN
			IF COMPAR(TMP_SG, "   ",3,NE) THEN		;joh006
				BEGIN
				PRINT LOG_ADI, "FILLER %p BRAND %p SET TO EMPTY",FILLER_SG,TMP_SG
;				FILLER_BRAND_PTR = "EMPTY"		
;joh006				FILLER_BRAND_PTR = ""		
				FILLER_BRAND_PTR = "   "		;joh006
				END
			END
		;joh003 end
		END							;joh008


	; update last inuse integers 
        LAST_LINEUSE_PTR1_PTR 		= FILLER_INUSE_INT
	LAST_FILLER_DRAFT_USE_PTR	= FILLER_DRAFT_USE
	
	;	
	RETURN

;===============================================================================
;		FILLTER CHANGE CHECK
;===============================================================================
FILLERCHGCHK:
;	This logic will reset the release id for bbt\filler pairs so that if 
;	multiple bbt's are assigned to multiple fillers, independent paths are split 
;	when a matrix valve is closed
	; C01 Draft
	FILLER_SG 				= "C01"
	FILLER_DRAFT_USE			= DRAFT_C01_LINEUSE_ALLOF7
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_C01_LINEUSE_ALLOF7)
	IF EX1_FG   THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_C01_ALLOF7
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_C01_LINEUSE_ALLOF7, FILLER_DRAFT_USE, NEXT_REL_ID
		IF (LAST_DRAFT_C01_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	; C01 Non-Draft
	FILLER_SG 				= "C01"
;joh002	FILLER_INUSE_INT			= PRM_D3_C01_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C01_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_C01_LINEUSE_PRT1_ALLOF7)
	IF EX1_FG  THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_C01_ALLOF7
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_C01_LINEUSE_PRT1_ALLOF7, FILLER_INUSE_INT, NEXT_REL_ID
		IF (LAST_C01_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	; C02 Draft
	FILLER_SG 				= "C02"
	FILLER_DRAFT_USE			= DRAFT_C02_LINEUSE_ALLOF7
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_C02_LINEUSE_ALLOF7)
	IF EX1_FG THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_C02_ALLOF7
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG, LAST_DRAFT_C02_LINEUSE_ALLOF7,FILLER_DRAFT_USE,  NEXT_REL_ID
		IF (LAST_DRAFT_C02_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	; C02 Non-Draft
	FILLER_SG 				= "C02"
;joh002	FILLER_INUSE_INT			= PRM_D3_C02_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C02_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_C02_LINEUSE_PRT1_ALLOF7)
	IF EX1_FG  THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_C02_ALLOF7
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_C02_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT, NEXT_REL_ID
		IF (LAST_C02_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	; C03 Draft
	FILLER_SG 				= "C03"
	FILLER_DRAFT_USE			= DRAFT_C03_LINEUSE_ALLOF7
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_C03_LINEUSE_ALLOF7)
	IF EX1_FG  THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_C03_ALLOF7
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_C03_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_C03_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; C03 Non-Draft                                                                                                                           
	FILLER_SG 				= "C03"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_C03_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= C03_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_C03_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_C03_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_C03_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		IF (LAST_C03_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID                           	                                                                                       
		END                                                                                                                               
	;                                                                                                                                         
	; B04 Draft                                                                                                                               
	FILLER_SG 				= "B04"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_B04_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_B04_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B04_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_B04_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_B04_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; B04 Non-Draft                                                                                                                           
	FILLER_SG 				= "B04"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_B04_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= B04_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_B04_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B04_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_B04_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		IF (LAST_B04_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; B05 Draft                                                                                                                               
	FILLER_SG 				= "B05"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_B05_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_B05_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG  THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B05_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_B05_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_B05_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; B05 Non-Draft                                                                                                                           
	FILLER_SG 				= "B05"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_B05_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= B05_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_B05_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B05_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_B05_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		IF (LAST_B05_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; C06 Draft                                                                                                                               
	FILLER_SG 				= "C06"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_C06_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_C06_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_C06_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_C06_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_C06_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; C06 Non-Draft                                                                                                                           
	FILLER_SG 				= "C06"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_C06_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= C06_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_C06_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_C06_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_C06_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		IF (LAST_C06_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; C07 Draft                                                                                                                               
	FILLER_SG 				= "C07"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_C07_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_C07_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_C07_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_C07_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_C07_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; C07 Non-Draft                                                                                                                           
	FILLER_SG 				= "C07"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_C07_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= C07_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_C07_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG  & (LAST_C07_LINEUSE_PRT1_ALLOF7 > 0) THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_C07_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_C07_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; B08 Draft                                                                                                                               
	FILLER_SG 				= "B08"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_B08_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_B08_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG  & (LAST_DRAFT_B08_LINEUSE_ALLOF7 > 0) THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B08_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_B08_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; B08 Non-Draft                                                                                                                           
	FILLER_SG 				= "B08"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_B08_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= B08_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_B08_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG  & (LAST_B08_LINEUSE_PRT1_ALLOF7 > 0) THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B08_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_B08_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; R02 Draft                                                                                                                               
	FILLER_SG 				= "R02"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_R02_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_R02_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_R02_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_R02_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_R02_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; R02 Non-Draft                                                                                                                           
	FILLER_SG 				= "R02"                                                                                           
;joh002	FILLER_INUSE_INT			= PRM_D3_R02_LINEUSE_PRT1:AI_MEAS                                                                 
	FILLER_INUSE_INT			= R02_LINEUSE_PRT1_ALLOF7		;joh002
	EX1_FG = (FILLER_INUSE_INT != LAST_R02_LINEUSE_PRT1_ALLOF7)                                                                               
	IF EX1_FG THEN                                                                                      
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_R02_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_R02_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID     
		IF (LAST_R02_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID                                                                                                                  
		END                                                                                                                               
	;                                                                                                                                         
	; B09 Draft                                                                                                                               
	FILLER_SG 				= "B09"                                                                                           
	FILLER_DRAFT_USE			= DRAFT_B09_LINEUSE_ALLOF7                                                                        
	EX1_FG = (FILLER_DRAFT_USE != LAST_DRAFT_B09_LINEUSE_ALLOF7)                                                                              
	IF EX1_FG THEN                                                                                     
		BEGIN                                                                                                                             
		NEXT_REL_ID = RELEASE_ID_B09_ALLOF7                                                                                               
	  	PRINT LOG_ADI, "FILLER %p DRAFT USE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_DRAFT_B09_LINEUSE_ALLOF7,FILLER_DRAFT_USE,NEXT_REL_ID
		IF (LAST_DRAFT_B09_LINEUSE_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	; B09 Non-Draft
	FILLER_SG 				= "B09"
	IF (FP_FPST_FILL_TANK_NUM:AI_INVL = FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS) & (FP_FPST_FILL_TANK_NUM:AI_INVL > 0)  THEN
;joh002		FILLER_INUSE_INT = PRM_D3_B09_LINEUSE_PRT1:AI_MEAS			
		FILLER_INUSE_INT = B09_LINEUSE_PRT1_ALLOF7				;joh002
	ELSE
		FILLER_INUSE_INT = 0			

	EX1_FG = (FILLER_INUSE_INT != LAST_B09_LINEUSE_PRT1_ALLOF7)
	IF EX1_FG  THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_B09_ALLOF7
	  	PRINT LOG_ADI, "FILLER %p NON-DRAFT LINEUSE CHG FROM %i TO %i: RESET REL ID %i", FILLER_SG,LAST_B09_LINEUSE_PRT1_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID
		IF (LAST_B09_LINEUSE_PRT1_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	FILLER_SG 				= "B09"
	FILLER_INUSE_INT = FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS
	EX1_FG = (FILLER_INUSE_INT != LAST_FPST_HR09_SUPPLY_TNK_NUM_ALLOF7)
	IF EX1_FG THEN
		BEGIN
		NEXT_REL_ID = RELEASE_ID_B09_ALLOF7
	  	PRINT LOG_ADI, "FPST USE CHG FROM %i TO %i: RESET REL ID %i", LAST_FPST_HR09_SUPPLY_TNK_NUM_ALLOF7,FILLER_INUSE_INT,  NEXT_REL_ID
		IF (LAST_FPST_HR09_SUPPLY_TNK_NUM_ALLOF7 > 0) THEN
			GOSUB RESETRELID
		END
	;
	RETURN

;===============================================================================
;		UPDATE FILLER STRINGS
;===============================================================================
UPDATEFILLERSTRINGS:

	FILLER_SG 				= "C01"
;joh002	FILLER_INUSE_INT			= PRM_D3_C01_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C01_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_C01_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_C01_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= C01_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= C01DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= C01_BRAND_SG
	ASSIGN FILLER_FG_PTR			= MCMSPKINFO_C01_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_C01_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_C01_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_C01_TANK_SG_ALLOF7		= TMP_SG
	
    ;
	FILLER_SG 				= "C02"
;joh002	FILLER_INUSE_INT			= PRM_D3_C02_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C02_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_C02_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_C02_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= C02_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= C02DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= C02_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_C02_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_C02_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_C02_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_C02_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "C03"
;joh002	FILLER_INUSE_INT			= PRM_D3_C03_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C03_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_C03_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_C03_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= C03_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= C03DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= C03_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_C03_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_C03_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_C03_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_C03_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "B04"
;joh002	FILLER_INUSE_INT			= PRM_D3_B04_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= B04_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_B04_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_B04_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= B04_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= B04DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= B04_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_B04_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_B04_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_B04_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_B04_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "B05"
;joh002	FILLER_INUSE_INT			= PRM_D3_B05_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= B05_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_B05_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_B05_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= B05_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= B05DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= B05_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_B05_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_B05_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_B05_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_B05_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "C06"
;joh002	FILLER_INUSE_INT			= PRM_D3_C06_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C06_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_C06_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_C06_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= C06_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= C06DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= C06_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_C06_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_C06_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_C06_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_C06_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "R02"
;joh002	FILLER_INUSE_INT			= PRM_D3_R02_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= R02_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_R02_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_R02_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= R02_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= R02DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= R02_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_R02_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_R02_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_R02_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_R02_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "C07"
;joh002	FILLER_INUSE_INT			= PRM_D3_C07_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= C07_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_C07_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_C07_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= C07_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= C07DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= C07_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_C07_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_C07_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_C07_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_C07_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "B08"
;joh002	FILLER_INUSE_INT			= PRM_D3_B08_LINEUSE_PRT1:AI_MEAS
	FILLER_INUSE_INT			= B08_LINEUSE_PRT1_ALLOF7			;joh002
	FILLER_DRAFT_USE			= DRAFT_B08_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_B08_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= B08_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= B08DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= B08_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_B08_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_B08_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_B08_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_B08_TANK_SG_ALLOF7	= TMP_SG
    ;
	FILLER_SG 				= "B09"
	;
	IF (FP_FPST_FILL_TANK_NUM:AI_INVL = FPST_HR09_SUPPLY_TNK_NUM:AI_MEAS) & (FP_FPST_FILL_TANK_NUM:AI_INVL > 0)  THEN
;joh002		FILLER_INUSE_INT = PRM_D3_B09_LINEUSE_PRT1:AI_MEAS			
		FILLER_INUSE_INT = B09_LINEUSE_PRT1_ALLOF7					;joh002
	ELSE
		FILLER_INUSE_INT = 0			
	;
	FILLER_DRAFT_USE			= DRAFT_B09_LINEUSE_ALLOF7
	ASSIGN FILLER_REL_ID_PTR		= RELEASE_ID_B09_ALLOF7
	ASSIGN NONDRAFT_REL_ID_PTR		= B09_REL_ID_FL
	ASSIGN DRAFT_REL_ID_PTR			= B09DR_REL_ID_FL
	ASSIGN FILLER_BRAND_PTR			= B09_BRAND_SG
	ASSIGN FILLER_FG_PTR				= MCMSPKINFO_B09_FG_ALLOF7
	ASSIGN LAST_FILLER_DRAFT_USE_PTR	= LAST_DRAFT_B09_LINEUSE_ALLOF7
	ASSIGN LAST_LINEUSE_PTR1_PTR		= LAST_B09_LINEUSE_PRT1_ALLOF7
	NEXT_REL_ID				= FILLER_REL_ID_PTR
	GOSUB BUILDTANKLIST	
	MCMSPKINFO_B09_TANK_SG_ALLOF7	= TMP_SG
	;
	RETURN

;===============================================================================
;		RELEASE ID CLEANUP
;===============================================================================
RELIDCLEANUP:
	IF ( RELEASE_ID_C01_ALLOF7 > 0) & ( MCMSPKINFO_C01_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR C01 RELEASE ID %.0f",RELEASE_ID_C01_ALLOF7
		RELEASE_ID_C01_ALLOF7 = 0
		C01_REL_ID_FL  = 0
		C01DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_C02_ALLOF7 > 0) & ( MCMSPKINFO_C02_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR C02 RELEASE ID %.0f",RELEASE_ID_C02_ALLOF7
		RELEASE_ID_C02_ALLOF7  = 0
		C02_REL_ID_FL  = 0
		C02DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_C03_ALLOF7 > 0) & ( MCMSPKINFO_C03_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR C03 RELEASE ID %.0f",RELEASE_ID_C03_ALLOF7
		RELEASE_ID_C03_ALLOF7  = 0
		C03_REL_ID_FL  = 0
		C03DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_B04_ALLOF7 > 0) & ( MCMSPKINFO_B04_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR B04 RELEASE ID %.0f",RELEASE_ID_B04_ALLOF7
		RELEASE_ID_B04_ALLOF7  = 0
		B04_REL_ID_FL  = 0
		B04DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_B05_ALLOF7 > 0) & ( MCMSPKINFO_B05_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR B05 RELEASE ID %.0f",RELEASE_ID_B05_ALLOF7
		RELEASE_ID_B05_ALLOF7  = 0
		B05_REL_ID_FL  = 0
		B05DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_C06_ALLOF7 > 0) & ( MCMSPKINFO_C06_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR C06 RELEASE ID %.0f",RELEASE_ID_C06_ALLOF7
		RELEASE_ID_C06_ALLOF7  = 0
		C06_REL_ID_FL  = 0
		C06DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_R02_ALLOF7 > 0) & ( MCMSPKINFO_R02_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR R02 RELEASE ID %.0f",RELEASE_ID_R02_ALLOF7
		RELEASE_ID_R02_ALLOF7  = 0
		R02_REL_ID_FL  = 0
		R02DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_C07_ALLOF7 > 0) & ( MCMSPKINFO_C07_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR C07 RELEASE ID %.0f",RELEASE_ID_C07_ALLOF7
		RELEASE_ID_C07_ALLOF7  = 0
		C07_REL_ID_FL  = 0
		C07DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_B08_ALLOF7 > 0) & ( MCMSPKINFO_B08_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR B08 RELEASE ID %.0f",RELEASE_ID_B08_ALLOF7
		RELEASE_ID_B08_ALLOF7  = 0
		B08_REL_ID_FL  = 0
		B08DR_REL_ID_FL = 0
		END
	IF ( RELEASE_ID_B09_ALLOF7 > 0) & ( MCMSPKINFO_B09_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR B09 RELEASE ID %.0f",RELEASE_ID_B09_ALLOF7
		RELEASE_ID_B09_ALLOF7  = 0
		B09_REL_ID_FL  = 0
		B09DR_REL_ID_FL = 0
		END
	IF ( PRT_1G1_REL_ID_FL > 0) & ( MCMSPKINFO_1G1_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G1 RELEASE ID %.0f",PRT_1G1_REL_ID_FL
		PRT_1G1_REL_ID_FL  = 0
		END
	IF ( PRT_1G2_REL_ID_FL > 0) & ( MCMSPKINFO_1G2_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G2 RELEASE ID %.0f",PRT_1G2_REL_ID_FL
		PRT_1G2_REL_ID_FL  = 0
		END
	IF ( PRT_1G3_REL_ID_FL > 0) & ( MCMSPKINFO_1G3_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G3 RELEASE ID %.0f",PRT_1G3_REL_ID_FL
		PRT_1G3_REL_ID_FL  = 0
		END
	IF ( PRT_1G4_REL_ID_FL > 0) & ( MCMSPKINFO_1G4_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G4 RELEASE ID %.0f",PRT_1G4_REL_ID_FL
		PRT_1G4_REL_ID_FL  = 0
		END
	IF ( PRT_1G5_REL_ID_FL > 0) & ( MCMSPKINFO_1G5_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G5 RELEASE ID %.0f",PRT_1G5_REL_ID_FL
		PRT_1G5_REL_ID_FL  = 0
		END
	IF ( PRT_1G6_REL_ID_FL > 0) & ( MCMSPKINFO_1G6_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G6 RELEASE ID %.0f",PRT_1G6_REL_ID_FL
		PRT_1G6_REL_ID_FL  = 0
		END
	IF ( PRT_1G7_REL_ID_FL > 0) & ( MCMSPKINFO_1G7_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G7 RELEASE ID %.0f",PRT_1G7_REL_ID_FL
		PRT_1G7_REL_ID_FL  = 0
		END
	IF ( PRT_1G8_REL_ID_FL > 0) & ( MCMSPKINFO_1G8_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G8 RELEASE ID %.0f",PRT_1G8_REL_ID_FL
		PRT_1G8_REL_ID_FL  = 0
		END
	IF ( PRT_1G9_REL_ID_FL > 0) & ( MCMSPKINFO_1G9_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G9 RELEASE ID %.0f",PRT_1G9_REL_ID_FL
		PRT_1G9_REL_ID_FL  = 0
		END
	IF ( PRT_1G10_REL_ID_FL > 0) & ( MCMSPKINFO_1G10_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 1G10 RELEASE ID %.0f",PRT_1G10_REL_ID_FL
		PRT_1G10_REL_ID_FL  = 0
		END
	IF ( PRT_2G1_REL_ID_FL > 0) & ( MCMSPKINFO_2G1_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G1 RELEASE ID %.0f",PRT_2G1_REL_ID_FL
		PRT_2G1_REL_ID_FL  = 0
		END
	IF ( PRT_2G2_REL_ID_FL > 0) & ( MCMSPKINFO_2G2_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G2 RELEASE ID %.0f",PRT_2G2_REL_ID_FL
		PRT_2G2_REL_ID_FL  = 0
		END
	IF ( PRT_2G3_REL_ID_FL > 0) & ( MCMSPKINFO_2G3_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G3 RELEASE ID %.0f",PRT_2G3_REL_ID_FL
		PRT_2G3_REL_ID_FL  = 0
		END
	IF ( PRT_2G4_REL_ID_FL > 0) & ( MCMSPKINFO_2G4_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G4 RELEASE ID %.0f",PRT_2G4_REL_ID_FL
		PRT_2G4_REL_ID_FL  = 0
		END
	IF ( PRT_2G5_REL_ID_FL > 0) & ( MCMSPKINFO_2G5_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G5 RELEASE ID %.0f",PRT_2G5_REL_ID_FL
		PRT_2G5_REL_ID_FL  = 0
		END
	IF ( PRT_2G6_REL_ID_FL > 0) & ( MCMSPKINFO_2G6_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G6 RELEASE ID %.0f",PRT_2G6_REL_ID_FL
		PRT_2G6_REL_ID_FL  = 0
		END
	IF ( PRT_2G7_REL_ID_FL > 0) & ( MCMSPKINFO_2G7_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G7 RELEASE ID %.0f",PRT_2G7_REL_ID_FL
		PRT_2G7_REL_ID_FL  = 0
		END
	IF ( PRT_2G8_REL_ID_FL > 0) & ( MCMSPKINFO_2G8_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G8 RELEASE ID %.0f",PRT_2G8_REL_ID_FL
		PRT_2G8_REL_ID_FL  = 0
		END
	IF ( PRT_2G9_REL_ID_FL > 0) & ( MCMSPKINFO_2G9_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G9 RELEASE ID %.0f",PRT_2G9_REL_ID_FL
		PRT_2G9_REL_ID_FL  = 0
		END
	IF ( PRT_2G10_REL_ID_FL > 0) & ( MCMSPKINFO_2G10_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 2G10 RELEASE ID %.0f",PRT_2G10_REL_ID_FL
		PRT_2G10_REL_ID_FL  = 0
		END
	IF ( PRT_3G1_REL_ID_FL > 0) & ( MCMSPKINFO_3G1_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G1 RELEASE ID %.0f",PRT_3G1_REL_ID_FL
		PRT_3G1_REL_ID_FL  = 0
		END
	IF ( PRT_3G2_REL_ID_FL > 0) & ( MCMSPKINFO_3G2_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G2 RELEASE ID %.0f",PRT_3G2_REL_ID_FL
		PRT_3G2_REL_ID_FL  = 0
		END
	IF ( PRT_3G3_REL_ID_FL > 0) & ( MCMSPKINFO_3G3_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G3 RELEASE ID %.0f",PRT_3G3_REL_ID_FL
		PRT_3G3_REL_ID_FL  = 0
		END
	IF ( PRT_3G4_REL_ID_FL > 0) & ( MCMSPKINFO_3G4_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G4 RELEASE ID %.0f",PRT_3G4_REL_ID_FL
		PRT_3G4_REL_ID_FL  = 0
		END
	IF ( PRT_3G5_REL_ID_FL > 0) & ( MCMSPKINFO_3G5_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G5 RELEASE ID %.0f",PRT_3G5_REL_ID_FL
		PRT_3G5_REL_ID_FL  = 0
		END
	IF ( PRT_3G6_REL_ID_FL > 0) & ( MCMSPKINFO_3G6_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G6 RELEASE ID %.0f",PRT_3G6_REL_ID_FL
		PRT_3G6_REL_ID_FL  = 0
		END
	IF ( PRT_3G7_REL_ID_FL > 0) & ( MCMSPKINFO_3G7_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G7 RELEASE ID %.0f",PRT_3G7_REL_ID_FL
		PRT_3G7_REL_ID_FL  = 0
		END
	IF ( PRT_3G8_REL_ID_FL > 0) & ( MCMSPKINFO_3G8_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G8 RELEASE ID %.0f",PRT_3G8_REL_ID_FL
		PRT_3G8_REL_ID_FL  = 0
		END
	IF ( PRT_3G9_REL_ID_FL > 0) & ( MCMSPKINFO_3G9_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G9 RELEASE ID %.0f",PRT_3G9_REL_ID_FL
		PRT_3G9_REL_ID_FL  = 0
		END
	IF ( PRT_3G10_REL_ID_FL > 0) & ( MCMSPKINFO_3G10_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 3G10 RELEASE ID %.0f",PRT_3G10_REL_ID_FL
		PRT_3G10_REL_ID_FL  = 0
		END
	IF ( DYN_5F4_REL_ID_FL > 0) & ( MCMSPKINFO_5F4_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 5F4 RELEASE ID %.0f",DYN_5F4_REL_ID_FL
		DYN_5F4_REL_ID_FL  = 0
		END
	IF ( DYN_5F3_REL_ID_FL > 0) & ( MCMSPKINFO_5F3_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR 5F3 RELEASE ID %.0f",DYN_5F3_REL_ID_FL
		DYN_5F3_REL_ID_FL  = 0
		END
	IF ( CFT1_REL_ID_FL > 0) & ( MCMSPKINFO_CFT1_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR CFT1 RELEASE ID %.0f",CFT1_REL_ID_FL
		CFT1_REL_ID_FL  = 0
		END
	IF ( CFT2_REL_ID_FL > 0) & ( MCMSPKINFO_CFT2_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR CFT2 RELEASE ID %.0f",CFT2_REL_ID_FL
		CFT2_REL_ID_FL  = 0
		END
	IF ( CFT3_REL_ID_FL > 0) & ( MCMSPKINFO_CFT3_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR CFT3 RELEASE ID %.0f",CFT3_REL_ID_FL
		CFT3_REL_ID_FL  = 0
		END
	IF ( CFT4_REL_ID_FL > 0) & ( MCMSPKINFO_CFT4_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR CFT4 RELEASE ID %.0f",CFT4_REL_ID_FL
		CFT4_REL_ID_FL  = 0
		END
	IF ( PFT1_REL_ID_FL > 0) & ( MCMSPKINFO_PFT1_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR PFT1 RELEASE ID %.0f",PFT1_REL_ID_FL
		PFT1_REL_ID_FL  = 0
		END
	IF ( FPST_REL_ID_FL > 0) & ( MCMSPKINFO_FPST_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR FPST RELEASE ID %.0f",FPST_REL_ID_FL
		FPST_REL_ID_FL  = 0
		END
	IF ( FPST2_REL_ID_FL > 0) & ( MCMSPKINFO_FPST2_FG_ALLOF7 = 0) THEN
		BEGIN
		PRINT LOG_ADI, "CLEAR FPST2 RELEASE ID %.0f",FPST2_REL_ID_FL
		FPST2_REL_ID_FL  = 0
		END

	RETURN
	
	
#include <ilk_errsub.inc>
KIKSUB:
	KRSCLR						;clear kick routine

	EXIT						;exit program


	NOP						;last compiled loc
	END                                     	;Compiler end

